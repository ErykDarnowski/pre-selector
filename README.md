# pre-SELECTOR

A python program to ease picking [**pre-commit**](https://pre-commit.com/) hooks.

![image](https://user-images.githubusercontent.com/81530705/197750175-39cc431d-1daa-410b-b2fa-4f1009700f5f.png)

<!-- FOR THE FUTURE:
## Table of Contents

[ TOC ]

## Instruction

1. Install by running: `pip install X`.
2. `cd` in to repo you'd like to add [**pre-commit**]() to.
3. Temporarily stage all your changes, like so: `git add -A`.
3. Run: `X`.
  - This command can be run anywhere in a repo (it finds the root dir by itself).
  - If there are 'recursive' repos (repos in repos), it get's the "closest" repo (meaning the first root dir it finds going up the dir tree).
-->

<details>
<summary>Development</summary>

## Files

| File                              | Description                                                                                                                                                                                                                                                                                                     |
| :-------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `menu.py`                         | Prototype of the program's initial menu screen.                                                                                                                                                                                                                                                                 |
| `get_ext.py`                      | Prints distinct extensions in path given as argument.                                                                                                                                                                                                                                                           |
| `is_git_repo.py`                  | Checks whether path given in argument contains git repository.                                                                                                                                                                                                                                                  |
| `get_ext-git.py`                  | Prints table of files and their extensions (meant to be a better approach than current one in `get_ext.py` as it uses `git ls-files` to only get the files 'important' for the repo).                                                                                                                           |
| `hooks_to_md.py`                  | Converts and prints `hooks.json` as Markdown (this way it's easier to edit when you're picking the exact hooks). Keep in mind you have to pipe it in to a file, like so: `./hooks_to_md.py >> markdown.md`.                                                                                                     |
| `convert_to_one_line.py`          | Converts a multi line piece of text (given in variable) describing a hook group (taken from a Markdown file generated by `hooks_to_md.py`) in to one line required by JSON in `hook_ext_pairs.json`.                                                                                                            |
| `generate_output_files.py`        | Writes the output files containing information such as auto picked hook groups, other available ones and so on.                                                                                                                                                                                                 |
| `find_hook_group_for_ext.py`      | Print the right text (hook group) from `hook_ext_pairs.json` for extension given as argument.                                                                                                                                                                                                                   |
| `updates/were_hooks_added.py`     | Check line number difference in local `hooks.json` file and the one hosted on the **pre-commit** website: <https://pre-commit.com/all-hooks.json> to determine whether a hook was added (the approach is supposed to not allow for things like version number bumps to trigger an update alert).                |
| `updates/are_hooks_up_to_date.py` | Check for any difference between the local `hooks.json` file and the one hosted on the **pre-commit** website: <https://pre-commit.com/all-hooks.json> to determine whether anything was changed (this approach is supposed to allow for things like version number bumps and such to trigger an update alert). |

## To flesh out

Things to test (find edge cases) / flesh out over time.

- `get_ext.py` (`git ls-files` behavior getting all files)
- `hook_ext_pairs.json` (hook group to ext matching)
- `detect_from_shebang.py` (matching to ext / variations of being able to write the same shebang)
</details>
